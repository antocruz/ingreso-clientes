/*
 jQuery Form Plugin
 version: 3.51.0-2014.06.20
 Requires jQuery v1.5 or later
 Copyright (c) 2014 M. Alsup
 Examples and documentation at: http://malsup.com/jquery/form/
 Project repository: https://github.com/malsup/form
 Dual licensed under the MIT and GPL licenses.
 https://github.com/malsup/form#copyright-and-license
*/
(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):b("undefined"!=typeof jQuery?jQuery:window.Zepto)})(function(b){function v(a){var g=a.data;a.isDefaultPrevented()||(a.preventDefault(),b(a.target).ajaxSubmit(g))}function z(a){var g=a.target,c=b(g);if(!c.is("[type=submit],[type=image]")){g=c.closest("[type=submit]");if(0===g.length)return;g=g[0]}var f=this;f.clk=g;"image"==g.type&&(void 0!==a.offsetX?(f.clk_x=a.offsetX,f.clk_y=a.offsetY):"function"==typeof b.fn.offset?(c=c.offset(),
f.clk_x=a.pageX-c.left,f.clk_y=a.pageY-c.top):(f.clk_x=a.pageX-g.offsetLeft,f.clk_y=a.pageY-g.offsetTop));setTimeout(function(){f.clk=f.clk_x=f.clk_y=null},100)}function r(){if(b.fn.ajaxSubmit.debug){var a="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(a):window.opera&&window.opera.postError&&window.opera.postError(a)}}var B=void 0!==b("<input type='file'/>").get(0).files;var F=void 0!==window.FormData;var I=!!b.fn.prop;b.fn.attr2=function(){if(!I)return this.attr.apply(this,
arguments);var a=this.prop.apply(this,arguments);return a&&a.jquery||"string"===typeof a?a:this.attr.apply(this,arguments)};b.fn.ajaxSubmit=function(a){function g(d){d=b.param(d,a.traditional).split("&");var f=d.length,g=[],c;for(c=0;c<f;c++){d[c]=d[c].replace(/\+/g," ");var k=d[c].split("=");g.push([decodeURIComponent(k[0]),decodeURIComponent(k[1])])}return g}function c(d){for(var f=new FormData,c=0;c<d.length;c++)f.append(d[c].name,d[c].value);if(a.extraData)for(d=g(a.extraData),c=0;c<d.length;c++)d[c]&&
f.append(d[c][0],d[c][1]);a.data=null;c=b.extend(!0,{},b.ajaxSettings,a,{contentType:!1,processData:!1,cache:!1,type:p||"POST"});a.uploadProgress&&(c.xhr=function(){var d=b.ajaxSettings.xhr();d.upload&&d.upload.addEventListener("progress",function(b){var d=0,c=b.loaded||b.position,f=b.total;b.lengthComputable&&(d=Math.ceil(c/f*100));a.uploadProgress(b,c,f,d)},!1);return d});c.data=null;var k=c.beforeSend;c.beforeSend=function(b,d){d.data=a.formData?a.formData:f;k&&k.call(this,b,d)};return b.ajax(c)}
function f(c){function f(a){var b=null;try{a.contentWindow&&(b=a.contentWindow.document)}catch(D){r("cannot get iframe.contentWindow document: "+D)}if(b)return b;try{b=a.contentDocument?a.contentDocument:a.document}catch(D){r("cannot get iframe.contentDocument: "+D),b=a.document}return b}function g(){function a(){try{var b=f(w).readyState;r("state = "+b);b&&"uninitialized"==b.toLowerCase()&&setTimeout(a,50)}catch(J){r("Server abort: ",J," (",J.name,")"),k(2),u&&clearTimeout(u),u=void 0}}var c=d.attr2("target"),
h=d.attr2("action"),g=d.attr("enctype")||d.attr("encoding")||"multipart/form-data";l.setAttribute("target",v);p&&!/post/i.test(p)||l.setAttribute("method","POST");h!=e.url&&l.setAttribute("action",e.url);e.skipEncodingOverride||p&&!/post/i.test(p)||d.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});e.timeout&&(u=setTimeout(function(){G=!0;k(1)},e.timeout));var m=[];try{if(e.extraData)for(var n in e.extraData)e.extraData.hasOwnProperty(n)&&(b.isPlainObject(e.extraData[n])&&e.extraData[n].hasOwnProperty("name")&&
e.extraData[n].hasOwnProperty("value")?m.push(b('<input type="hidden" name="'+e.extraData[n].name+'">').val(e.extraData[n].value).appendTo(l)[0]):m.push(b('<input type="hidden" name="'+n+'">').val(e.extraData[n]).appendTo(l)[0]));e.iframeTarget||y.appendTo("body");w.attachEvent?w.attachEvent("onload",k):w.addEventListener("load",k,!1);setTimeout(a,15);try{l.submit()}catch(L){document.createElement("form").submit.apply(l)}}finally{l.setAttribute("action",h),l.setAttribute("enctype",g),c?l.setAttribute("target",
c):d.removeAttr("target"),b(m).remove()}}function k(a){if(!h.aborted&&!B)if(t=f(w),t||(r("cannot access response document"),a=2),1===a&&h)h.abort("timeout"),x.reject(h,"timeout");else if(2==a&&h)h.abort("server abort"),x.reject(h,"error","server abort");else if(t&&t.location.href!=e.iframeSrc||G){w.detachEvent?w.detachEvent("onload",k):w.removeEventListener("load",k,!1);a="success";var c;try{if(G)throw"timeout";var d="xml"==e.dataType||t.XMLDocument||b.isXMLDoc(t);r("isXml="+d);if(!d&&window.opera&&
(null===t.body||!t.body.innerHTML)&&--A){r("requeing onLoad callback, DOM not available");setTimeout(k,250);return}var g=t.body?t.body:t.documentElement;h.responseText=g?g.innerHTML:null;h.responseXML=t.XMLDocument?t.XMLDocument:t;d&&(e.dataType="xml");h.getResponseHeader=function(a){return{"content-type":e.dataType}[a.toLowerCase()]};g&&(h.status=Number(g.getAttribute("status"))||h.status,h.statusText=g.getAttribute("statusText")||h.statusText);var l=(e.dataType||"").toLowerCase(),m=/(json|script|text)/.test(l);
if(m||e.textarea){var p=t.getElementsByTagName("textarea")[0];if(p)h.responseText=p.value,h.status=Number(p.getAttribute("status"))||h.status,h.statusText=p.getAttribute("statusText")||h.statusText;else if(m){var C=t.getElementsByTagName("pre")[0],q=t.getElementsByTagName("body")[0];C?h.responseText=C.textContent?C.textContent:C.innerText:q&&(h.responseText=q.textContent?q.textContent:q.innerText)}}else"xml"==l&&!h.responseXML&&h.responseText&&(h.responseXML=F(h.responseText));try{z=K(h,l,e)}catch(E){a=
"parsererror",h.error=c=E||a}}catch(E){r("error caught: ",E),a="error",h.error=c=E||a}h.aborted&&(r("upload aborted"),a=null);h.status&&(a=200<=h.status&&300>h.status||304===h.status?"success":"error");"success"===a?(e.success&&e.success.call(e.context,z,"success",h),x.resolve(h.responseText,"success",h),n&&b.event.trigger("ajaxSuccess",[h,e])):a&&(void 0===c&&(c=h.statusText),e.error&&e.error.call(e.context,h,a,c),x.reject(h,"error",c),n&&b.event.trigger("ajaxError",[h,e,c]));n&&b.event.trigger("ajaxComplete",
[h,e]);n&&!--b.active&&b.event.trigger("ajaxStop");e.complete&&e.complete.call(e.context,h,a);B=!0;e.timeout&&clearTimeout(u);setTimeout(function(){e.iframeTarget?y.attr("src",e.iframeSrc):y.remove();h.responseXML=null},100)}}var l=d[0],m,n,G,u,x=b.Deferred();x.abort=function(a){h.abort(a)};if(c)for(m=0;m<q.length;m++)c=b(q[m]),I?c.prop("disabled",!1):c.removeAttr("disabled");var e=b.extend(!0,{},b.ajaxSettings,a);e.context=e.context||e;var v="jqFormIO"+(new Date).getTime();if(e.iframeTarget){var y=
b(e.iframeTarget);(m=y.attr2("name"))?v=m:y.attr2("name",v)}else y=b('<iframe name="'+v+'" src="'+e.iframeSrc+'" />'),y.css({position:"absolute",top:"-1000px",left:"-1000px"});var w=y[0];var h={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(a){var c="timeout"===a?"timeout":"aborted";r("aborting upload... "+c);this.aborted=1;try{w.contentWindow.document.execCommand&&
w.contentWindow.document.execCommand("Stop")}catch(D){}y.attr("src",e.iframeSrc);h.error=c;e.error&&e.error.call(e.context,h,c,a);n&&b.event.trigger("ajaxError",[h,e,c]);e.complete&&e.complete.call(e.context,h,c)}};(n=e.global)&&0===b.active++&&b.event.trigger("ajaxStart");n&&b.event.trigger("ajaxSend",[h,e]);if(e.beforeSend&&!1===e.beforeSend.call(e.context,h,e))return e.global&&b.active--,x.reject(),x;if(h.aborted)return x.reject(),x;(c=l.clk)&&(m=c.name)&&!c.disabled&&(e.extraData=e.extraData||
{},e.extraData[m]=c.value,"image"==c.type&&(e.extraData[m+".x"]=l.clk_x,e.extraData[m+".y"]=l.clk_y));c=b("meta[name=csrf-token]").attr("content");(m=b("meta[name=csrf-param]").attr("content"))&&c&&(e.extraData=e.extraData||{},e.extraData[m]=c);e.forceSync?g():setTimeout(g,10);var z,t,A=50,B,F=b.parseXML||function(a,b){window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml");return b&&b.documentElement&&"parsererror"!=
b.documentElement.nodeName?b:null},H=b.parseJSON||function(a){return window.eval("("+a+")")},K=function(a,c,d){var e=a.getResponseHeader("content-type")||"",f="xml"===c||!c&&0<=e.indexOf("xml");a=f?a.responseXML:a.responseText;f&&"parsererror"===a.documentElement.nodeName&&b.error&&b.error("parsererror");d&&d.dataFilter&&(a=d.dataFilter(a,c));"string"===typeof a&&("json"===c||!c&&0<=e.indexOf("json")?a=H(a):("script"===c||!c&&0<=e.indexOf("javascript"))&&b.globalEval(a));return a};return x}if(!this.length)return r("ajaxSubmit: skipping submit process - no element selected"),
this;var d=this;"function"==typeof a?a={success:a}:void 0===a&&(a={});var p=a.type||this.attr2("method");var k=a.url||this.attr2("action");(k=(k="string"===typeof k?b.trim(k):"")||window.location.href||"")&&(k=(k.match(/^([^#]+)/)||[])[1]);a=b.extend(!0,{url:k,success:b.ajaxSettings.success,type:p||b.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},a);k={};this.trigger("form-pre-serialize",[this,a,k]);if(k.veto)return r("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),
this;if(a.beforeSerialize&&!1===a.beforeSerialize(this,a))return r("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var m=a.traditional;void 0===m&&(m=b.ajaxSettings.traditional);var q=[],l=this.formToArray(a.semantic,q);if(a.data){a.extraData=a.data;var n=b.param(a.data,m)}if(a.beforeSubmit&&!1===a.beforeSubmit(l,this,a))return r("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[l,this,a,k]);if(k.veto)return r("ajaxSubmit: submit vetoed via form-submit-validate trigger"),
this;k=b.param(l,m);n&&(k=k?k+"&"+n:n);"GET"==a.type.toUpperCase()?(a.url+=(0<=a.url.indexOf("?")?"&":"?")+k,a.data=null):a.data=k;var u=[];a.resetForm&&u.push(function(){d.resetForm()});a.clearForm&&u.push(function(){d.clearForm(a.includeHidden)});if(!a.dataType&&a.target){var v=a.success||function(){};u.push(function(c){var d=a.replaceTarget?"replaceWith":"html";b(a.target)[d](c).each(v,arguments)})}else a.success&&u.push(a.success);a.success=function(b,c,f){for(var g=a.context||this,k=0,l=u.length;k<
l;k++)u[k].apply(g,[b,c,f||d,d])};if(a.error){var z=a.error;a.error=function(b,c,f){z.apply(a.context||this,[b,c,f,d])}}if(a.complete){var H=a.complete;a.complete=function(b,c){H.apply(a.context||this,[b,c,d])}}n=0<b("input[type=file]:enabled",this).filter(function(){return""!==b(this).val()}).length;k="multipart/form-data"==d.attr("enctype")||"multipart/form-data"==d.attr("encoding");m=B&&F;r("fileAPI :"+m);var A;!1!==a.iframe&&(a.iframe||(n||k)&&!m)?a.closeKeepAlive?b.get(a.closeKeepAlive,function(){A=
f(l)}):A=f(l):A=(n||k)&&m?c(l):b.ajax(a);d.removeData("jqxhr").data("jqxhr",A);for(n=0;n<q.length;n++)q[n]=null;this.trigger("form-submit-notify",[this,a]);return this};b.fn.ajaxForm=function(a){a=a||{};a.delegation=a.delegation&&b.isFunction(b.fn.on);if(!a.delegation&&0===this.length){var g=this.selector,c=this.context;if(!b.isReady&&g)return r("DOM not ready, queuing ajaxForm"),b(function(){b(g,c).ajaxForm(a)}),this;r("terminating; zero elements found by selector"+(b.isReady?"":" (DOM not ready)"));
return this}return a.delegation?(b(document).off("submit.form-plugin",this.selector,v).off("click.form-plugin",this.selector,z).on("submit.form-plugin",this.selector,a,v).on("click.form-plugin",this.selector,a,z),this):this.ajaxFormUnbind().bind("submit.form-plugin",a,v).bind("click.form-plugin",a,z)};b.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};b.fn.formToArray=function(a,g){var c=[];if(0===this.length)return c;var f=this[0],d=this.attr("id"),p=a?f.getElementsByTagName("*"):
f.elements;p&&!/MSIE [678]/.test(navigator.userAgent)&&(p=b(p).get());d&&(d=b(':input[form="'+d+'"]').get(),d.length&&(p=(p||[]).concat(d)));if(!p||!p.length)return c;var k,m;var q=0;for(m=p.length;q<m;q++){var l=p[q];if((d=l.name)&&!l.disabled)if(a&&f.clk&&"image"==l.type)f.clk==l&&(c.push({name:d,value:b(l).val(),type:l.type}),c.push({name:d+".x",value:f.clk_x},{name:d+".y",value:f.clk_y}));else if((k=b.fieldValue(l,!0))&&k.constructor==Array){g&&g.push(l);var n=0;for(l=k.length;n<l;n++)c.push({name:d,
value:k[n]})}else if(B&&"file"==l.type)if(g&&g.push(l),k=l.files,k.length)for(n=0;n<k.length;n++)c.push({name:d,value:k[n],type:l.type});else c.push({name:d,value:"",type:l.type});else null!==k&&"undefined"!=typeof k&&(g&&g.push(l),c.push({name:d,value:k,type:l.type,required:l.required}))}!a&&f.clk&&(p=b(f.clk),q=p[0],(d=q.name)&&!q.disabled&&"image"==q.type&&(c.push({name:d,value:p.val()}),c.push({name:d+".x",value:f.clk_x},{name:d+".y",value:f.clk_y})));return c};b.fn.formSerialize=function(a){return b.param(this.formToArray(a))};
b.fn.fieldSerialize=function(a){var g=[];this.each(function(){var c=this.name;if(c){var f=b.fieldValue(this,a);if(f&&f.constructor==Array)for(var d=0,p=f.length;d<p;d++)g.push({name:c,value:f[d]});else null!==f&&"undefined"!=typeof f&&g.push({name:this.name,value:f})}});return b.param(g)};b.fn.fieldValue=function(a){for(var g=[],c=0,f=this.length;c<f;c++){var d=b.fieldValue(this[c],a);null===d||"undefined"==typeof d||d.constructor==Array&&!d.length||(d.constructor==Array?b.merge(g,d):g.push(d))}return g};
b.fieldValue=function(a,g){var c=a.name,f=a.type,d=a.tagName.toLowerCase();void 0===g&&(g=!0);if(g&&(!c||a.disabled||"reset"==f||"button"==f||("checkbox"==f||"radio"==f)&&!a.checked||("submit"==f||"image"==f)&&a.form&&a.form.clk!=a||"select"==d&&-1==a.selectedIndex))return null;if("select"==d){var p=a.selectedIndex;if(0>p)return null;c=[];d=a.options;var k=(f="select-one"==f)?p+1:d.length;for(p=f?p:0;p<k;p++){var m=d[p];if(m.selected){var q=m.value;q||(q=m.attributes&&m.attributes.value&&!m.attributes.value.specified?
m.text:m.value);if(f)return q;c.push(q)}}return c}return b(a).val()};b.fn.clearForm=function(a){return this.each(function(){b("input,select,textarea",this).clearFields(a)})};b.fn.clearFields=b.fn.clearInputs=function(a){var g=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var c=this.type,f=this.tagName.toLowerCase();g.test(c)||"textarea"==f?this.value="":"checkbox"==c||"radio"==c?this.checked=!1:"select"==f?this.selectedIndex=
-1:"file"==c?/MSIE/.test(navigator.userAgent)?b(this).replaceWith(b(this).clone(!0)):b(this).val(""):a&&(!0===a&&/hidden/.test(c)||"string"==typeof a&&b(this).is(a))&&(this.value="")})};b.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})};b.fn.enable=function(a){void 0===a&&(a=!0);return this.each(function(){this.disabled=!a})};b.fn.selected=function(a){void 0===a&&(a=!0);return this.each(function(){var g=
this.type;"checkbox"==g||"radio"==g?this.checked=a:"option"==this.tagName.toLowerCase()&&(g=b(this).parent("select"),a&&g[0]&&"select-one"==g[0].type&&g.find("option").selected(!1),this.selected=a)})};b.fn.ajaxSubmit.debug=!1});